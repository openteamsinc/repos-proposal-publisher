name: 'REPOS Proposal Publisher'
description: 'A GitHub Action to publish proposals to REPOS website'
author: 'Openteams Inc'

inputs:
  token:
    description: 'GitHub Token generated from GitHub Account'
    required: true
  api_url:
    description: 'API URL for the REPOS website'
    required: true
    default: ${{ secrets.API_URL }}

runs:
  using: 'composite'
  steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Checkout action repository
      uses: actions/checkout@v2
      with:
        repository: openteamsinc/repos-proposal-publisher
        path: ./action

    - name: Install Node.js dependencies
      run: npm install
      shell: bash
      working-directory: ./action  # Ensure this points to the directory with package.json

    - name: Run the action
      run: node index.js
      shell: bash
      working-directory: ./action  # Ensure this points to the directory with index.js
      env:
        API_URL: ${{ inputs.api_url }}  # Set the API_URL from the inputs

branding:
  icon: 'file'
  color: 'blue'